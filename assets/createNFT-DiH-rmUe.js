import{c as e,u as t,b as s,p as a,j as r,L as c,B as l,d as i,r as n,i as x,a as d,e as m,f as o,g as p,C as h,F as v,h as f}from"./index-CLHvjnOI.js";import{M as j,I as w}from"./modal-C4PoXDOT.js";import{S as N}from"./sameNFTBox-BjCO_1nH.js";import{s as u,w as g,a as C}from"./writeContract-Jw-22eMF.js";const b=i=>{const n=e.c(27),{isOpen:x,onClose:d,nftId:m}=i,{t:o}=t(),{currentCard:p}=s();let h,v,f,w,u,g,C,b,I,y,B;return n[0]!==m?(h=r.jsx(N,{nftId:m,className:"mb-[10px] w-[180px] md:w-[300px] h-[247px] md:h-[412px]"}),n[0]=m,n[1]=h):h=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"text-white/[.7]",children:"NFT ID："}),n[2]=v):v=n[2],n[3]!==p?(f=null!=p&&a(p.cardId),n[3]=p,n[4]=f):f=n[4],n[5]!==f?(w=r.jsx("div",{className:"gap-y-[8px] grid grid-cols-1 m-auto md:w-[240px] text-[18px]",children:r.jsxs("div",{className:"flex justify-between items-center",children:[v,r.jsx("div",{className:"text-white",children:f})]})}),n[5]=f,n[6]=w):w=n[6],n[7]!==o?(u=o("create.text12"),n[7]=o,n[8]=u):u=n[8],n[9]!==u?(g=r.jsx(c,{to:"/participate",className:"w-[160px] md:w-[180px]",children:r.jsx(l,{variant:"red",className:"w-full h-[50px] md:h-[3.1vw]",children:u})}),n[9]=u,n[10]=g):g=n[10],n[11]!==o?(C=o("create.text13"),n[11]=o,n[12]=C):C=n[12],n[13]!==d||n[14]!==C?(b=r.jsx(l,{onClick:d,variant:"redBorder",className:"w-[160px] md:w-[180px] h-[50px] md:h-[3.1vw]",children:C}),n[13]=d,n[14]=C,n[15]=b):b=n[15],n[16]!==g||n[17]!==b?(I=r.jsxs("div",{className:"flex md:flex-row flex-col justify-center items-center md:space-x-[60px] space-y-[15px] md:space-y-[0] mt-[30px] md:mt-0 md:mt-[42px]",children:[g,b]}),n[16]=g,n[17]=b,n[18]=I):I=n[18],n[19]!==h||n[20]!==w||n[21]!==I?(y=r.jsxs("div",{className:"m-auto w-[180px] md:w-[396px]",children:[h,w,I]}),n[19]=h,n[20]=w,n[21]=I,n[22]=y):y=n[22],n[23]!==x||n[24]!==d||n[25]!==y?(B=r.jsx(j,{isOpen:x,onClose:d,title:"",type:1,children:y}),n[23]=x,n[24]=d,n[25]=y,n[26]=B):B=n[26],B},I=()=>{const{showToast:e}=i(),{t:a}=t(),{refreshCards:c}=s(),[j,I]=n.useState(0),[y,B]=n.useState(!1),[k,D]=n.useState(""),[S,T]=n.useState(""),[F,O]=n.useState(!1),_=async()=>{if(5!=k.length)return void e(a("create.tips.text3"),"error");if(5!=S.length)return void e(a("create.tips.text4"),"error");const t=100,s=m(k.toUpperCase()),r=m(S.toUpperCase()),l=await o(p,{...v,functionName:"childrenCount",args:[BigInt(r)]});if(await o(p,{...v,functionName:"childrenCount",args:[BigInt(r)]})>=t)return e(a("create.tips.text1",{count:t}),"error");if(l>=t)return e(a("create.tips.text2",{count:t}),"error");const i=await o(p,{...f,functionName:"currentTokenId"});if(Number.isInteger(Number(s)))if(Number(s)>Number(i))e(a("create.tips.text4"),"error");else try{B(!0);const{request:t}=await u(p,{...h,functionName:"makeCard",args:[BigInt(s),BigInt(r),BigInt(j)]}),l=await g(p,t);await C(p,{hash:l}),await c(),e(a("create.tips.text5"),"success"),O(!0),setTimeout((()=>{B(!1)}),1e3)}catch(n){}finally{B(!1)}else e(a("create.tips.text3"),"error")};return r.jsxs("div",{className:"mt-[80px] pt-[20px] md:pt-[70px] pb-[148px] md:min-h-screen text-center",children:[r.jsx(b,{nftId:j,isOpen:F,onClose:()=>O(!1)}),r.jsx("div",{className:"container-1200",children:x()?r.jsxs("div",{className:"flex space-x-[6.1vw]",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"mb-[1.2vw] !text-left text-[2.5vw]",children:[r.jsx("div",{children:a("create.text3")}),r.jsx("div",{children:a("create.text4")})]}),r.jsx("div",{className:"text-[#6E726E] text-[1vw] text-left",children:a("create.text5")}),r.jsx("div",{className:"gap-[1.2vw] grid grid-cols-3 mt-[1.2vw]",children:Array.from({length:6},((e,t)=>r.jsx("div",{onClick:()=>I(t),className:d(" contrast-50 w-[180px] h-[247px]",j==t&&"filter-none"),children:r.jsx(N,{nftId:t,className:"w-full h-full"})},t)))})]}),r.jsxs("div",{className:"flex-none border-[#D4D4D4] md:ml-[119px] p-6 border rounded-[20px] md:w-[655px]",children:[r.jsx("div",{className:"font-bold text-[#3D3D3D] text-[1.6vw]",children:a("create.text6")}),r.jsx("div",{className:"my-[0.9vw] font-bold text-[0.9vw]",children:a("create.text7")}),r.jsx(N,{nftId:j,className:"w-[16.5vw] h-[22.8vw]"}),r.jsxs("div",{className:"gap-x-[1.2vw] grid grid-cols-2 md:m-[40px_0] my-[1.2vw]",children:[r.jsx(w,{value:S,onChange:e=>T(e),placeholder:a("create.text10"),className:"h-[3.1vw]"}),r.jsx(w,{value:k,onChange:e=>D(e),placeholder:a("create.text11"),className:"h-[3.1vw]"})]}),r.jsx(l,{onClick:_,loading:y,variant:"red",className:"w-[180px] h-[3.1vw]",children:a("create.text6")})]})]}):r.jsxs("div",{className:"",children:[r.jsxs("div",{children:[r.jsx("div",{className:"mb-4 font-bold !text-left text-[14px]",children:a("create.text8")}),r.jsx("div",{className:"gap-[14px] grid grid-cols-3 mt-[1.2vw]",children:Array.from({length:6},((e,t)=>r.jsx("div",{onClick:()=>I(t),className:d(" contrast-50",j==t&&"filter-none"),children:r.jsx(N,{nftId:t,className:"w-full h-full"})},t)))})]}),r.jsxs("div",{className:"mt-[30px]",children:[r.jsxs("div",{className:"mb-4 font-bold text-[14px] text-left",children:[a("create.text9"),"："]}),r.jsxs("div",{className:"gap-y-[16px] grid grid-cols-1",children:[r.jsx(w,{value:k,onChange:e=>D(e),placeholder:a("create.text10"),className:"h-[50px]"}),r.jsx(w,{value:S,onChange:e=>T(e),placeholder:a("create.text11"),className:"h-[50px]"})]}),r.jsx(l,{onClick:_,loading:y,variant:"red",className:"mt-10 md:mt-[100px] w-full h-[50px]",children:a("create.text6")})]})]})})]})};export{I as default};
