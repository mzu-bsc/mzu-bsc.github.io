System.register(["./index-legacy-jeZR7QVT.js","./modal-legacy-CkzAClKy.js","./sameNodeBox-legacy-Bhii_reb.js","./writeContract-legacy-BQJuRyJA.js","./carousel-legacy-B3VzX9Tq.js","./getBlock-legacy-Bsc4ZBOE.js"],(function(e,t){"use strict";var s,a,n,d,i,l,c,r,p,x,o,m,u,h,f,y,g,w,N,j,v,C,b,I,D,S,B,M,F;return{setters:[e=>{s=e.u,a=e.r,n=e.d,d=e.k,i=e.v,l=e.j,c=e.a,r=e.B,p=e.s,x=e.g,o=e.N,m=e.c,u=e.f,h=e.t,f=e.q,y=e.i,g=e.l,w=e.y},e=>{N=e.M,j=e.I},e=>{v=e.S,C=e.g},e=>{b=e.s,I=e.w,D=e.a},e=>{S=e.b,B=e.C,M=e.a},e=>{F=e.g}],execute:function(){const t=({isOpen:e,onClose:t,onUpdate:m})=>{const{t:u}=s(),[h,f]=a.useState(!1),[y,g]=a.useState(""),{showToast:w}=n(),{address:C}=d(),{currentNodeCard:S,deleteNodeCard:B}=i();return l.jsxs(N,{isOpen:e,onClose:t,title:u("node.text1"),className:"md:w-[505px] md:h-[580px]",children:[l.jsx("div",{className:"m-auto md:w-[160px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"h-[210px] md:h-[247px]",children:null!=S&&l.jsx(v,{typeId:S.typeId,className:c("md:w-[180px] md:h-[247px] w-[150px] h-[210px]")})}),l.jsxs("div",{className:"mt-[5px] text-[#3D3D3D] text-[20px]",children:["#",null!=S&&S.cardId]}),l.jsx("div",{className:"font-bold text-[#3D3D3D] text-[24px]",children:"MZU NFT"})]})}),l.jsx("div",{className:"grid grid-cols-1 my-6 text-[#CECFCD] text-[14px]",children:l.jsx(j,{className:"",value:y,placeholder:u("node.text2"),onChange:e=>g(e),inputClassName:"md:h-[56px] h-[45px] w-full"})}),l.jsxs("div",{className:"flex justify-center items-center space-x-[20px] md:space-x-[60px]",children:[l.jsx(r,{onClick:async()=>{if(C&&null!=S)try{if(f(!0),!p(y))return w(u("tips.errorAddress"),"error");const{request:e}=await b(x,{...o,functionName:"transferFrom",args:[C,y,BigInt(S.cardId)]}),s=await I(x,e);await D(x,{hash:s}),B(S.cardId),t(),w(u("tips.transferSuccessful"),"success"),m()}catch(e){}finally{f(!1)}},loading:h,variant:"red",className:"w-[120px] md:w-[180px] h-[40px] md:h-[3.1vw]",children:u("transfer")}),l.jsx(r,{onClick:t,variant:"redBorder",className:"w-[120px] md:w-[180px] h-[40px] md:h-[3.1vw]",children:u("cancel")})]})]})},k=e=>{const t=m.c(36),{isOpen:n,onClose:d}=e,{t:p}=s(),[x,o]=a.useState(),{currentNodeCard:u,nodes:h,setSelectedNodeCard:f}=i();let y,g,w;t[0]!==u||t[1]!==n?(y=()=>{n&&o(u)},t[0]=u,t[1]=n,t[2]=y):y=t[2],t[3]!==n?(g=[n],t[3]=n,t[4]=g):g=t[4],a.useEffect(y,g),t[5]!==x||t[6]!==d||t[7]!==f?(w=()=>{null!=x&&(f(x),d())},t[5]=x,t[6]=d,t[7]=f,t[8]=w):w=t[8];const j=w;let C,b,I,D,S,B,M,F,k;return t[9]!==p?(C=p("node.text3"),t[9]=p,t[10]=C):C=t[10],t[11]!==x||t[12]!==u||t[13]!==h?(b=null!=u&&null!=h&&h.length>0&&h.map(((e,t)=>l.jsxs("div",{onClick:()=>o(e),className:c("bg-white p-2 rounded-[8px] h-[184px]",x==e&&"border border-[#E5331C]"),children:[l.jsx(v,{typeId:e.typeId,className:c("w-[100px] h-min contrast-50",x==e&&"filter-none")}),l.jsx("div",{className:c("text-[#3D3D3D] flex justify-between px-[5px] mt-[5px] pl-[10px]",x==e&&"text-[#E5331C]"),children:l.jsxs("span",{className:"text-[16px]",children:["#",e.cardId]})})]},t))),t[11]=x,t[12]=u,t[13]=h,t[14]=b):b=t[14],t[15]!==b?(I=l.jsx("div",{className:"bg-[#F6F6F6] px-[15px] md:px-6 py-4 rounded-[12px] w-full h-[300px] md:h-[466px] overflow-auto",children:l.jsx("div",{className:"gap-2 grid grid-cols-2 md:grid-cols-4",children:b})}),t[15]=b,t[16]=I):I=t[16],t[17]!==p?(D=p("submit"),t[17]=p,t[18]=D):D=t[18],t[19]!==j||t[20]!==D?(S=l.jsx(r,{onClick:j,variant:"red",className:"w-full h-[full md:!text-[20px]",children:D}),t[19]=j,t[20]=D,t[21]=S):S=t[21],t[22]!==p?(B=p("cancel"),t[22]=p,t[23]=B):B=t[23],t[24]!==d||t[25]!==B?(M=l.jsx(r,{onClick:d,variant:"redBorder",className:"w-full h-full md:!text-[20px]",children:B}),t[24]=d,t[25]=B,t[26]=M):M=t[26],t[27]!==M||t[28]!==S?(F=l.jsxs("div",{className:"gap-[40px] grid grid-cols-2 mt-[20px] md:mt-[36px]",children:[S,M]}),t[27]=M,t[28]=S,t[29]=F):F=t[29],t[30]!==n||t[31]!==d||t[32]!==F||t[33]!==C||t[34]!==I?(k=l.jsxs(N,{isOpen:n,onClose:d,title:C,className:"md:w-[620px] md:h-[712px]",children:[I,F]}),t[30]=n,t[31]=d,t[32]=F,t[33]=C,t[34]=I,t[35]=k):k=t[35],k},_={address:"0x6C4BB7c216B147ef37b9a49f9371E2b49a9f8cd6",abi:[{name:"Deposit",type:"event",inputs:[{type:"uint256",name:"nodeCardId",indexed:!0},{type:"uint256",name:"poolId",indexed:!0}]},{name:"Harvest",type:"event",inputs:[{type:"uint256",name:"nodeCardId",indexed:!0},{type:"uint256",name:"poolId",indexed:!0},{type:"uint256",name:"reward"}]},{name:"Initialized",type:"event",inputs:[{type:"uint8",name:"version"}]},{name:"config",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"hasRole",type:"function",stateMutability:"view",inputs:[{type:"bytes32",name:"role"},{type:"address",name:"account"}],outputs:[{type:"bool"}]},{name:"node",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"nodeInfoOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"},{type:"uint256"}],outputs:[{type:"uint256",name:"rewardDebt"},{type:"uint256",name:"createdAt"}]},{name:"poolInfoOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256",name:"weight"},{type:"uint256",name:"totalCount"},{type:"uint256",name:"accNodePerShare"}]},{name:"totalWeight",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"usdt",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"initialize",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_permissionAdmin"},{type:"address",name:"_usdt"},{type:"address",name:"_node"},{type:"address",name:"_config"}],outputs:[]},{name:"updatePoolWeight",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"poolId"},{type:"uint256",name:"weight"}],outputs:[]},{name:"distribute",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"amount"}],outputs:[]},{name:"deposit",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"nodeCardId"},{type:"uint256",name:"poolId"}],outputs:[]},{name:"earned",type:"function",stateMutability:"view",inputs:[{type:"uint256",name:"nodeCardId"}],outputs:[{type:"uint256"}]},{name:"harvest",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"nodeCardId"}],outputs:[]}]},E=()=>{const e=m.c(24),[t,s]=a.useState(),[n,d]=a.useState(0),r=a.useRef(!1),p=a.useRef(!1),{currentNodeCard:x,nodes:o,setSelectedNodeCard:u}=i();let h,f,y,g,w;e[0]!==t?(h=()=>{if(!t)return;const e=()=>{if(!r.current){p.current=!0;const e=t.selectedScrollSnap();d(e)}r.current=!1};return t.on("select",e),()=>{t.off("select",e)}},f=[t],e[0]=t,e[1]=h,e[2]=f):(h=e[1],f=e[2]),a.useEffect(h,f),e[3]!==n||e[4]!==t||e[5]!==o||e[6]!==u?(y=()=>{if(!t||!o||!p.current)return;const e=o[n];e&&(u(e),p.current=!1)},e[3]=n,e[4]=t,e[5]=o,e[6]=u,e[7]=y):y=e[7],e[8]!==n||e[9]!==o?(g=[n,o],e[8]=n,e[9]=o,e[10]=g):g=e[10],a.useEffect(y,g),e[11]!==x||e[12]!==t||e[13]!==o?(w=[o,x,t],e[11]=x,e[12]=t,e[13]=o,e[14]=w):w=e[14],a.useEffect((()=>{if(!o||!t||p.current)return;const e=N();null!=e&&-1!==e&&e!==n&&o[e]?.cardId!==o[n]?.cardId&&(r.current=!0,t?.scrollTo(e))}),w);const N=()=>{if(null!=o&&null!=x)return o.findIndex((e=>e.cardId===x.cardId))};let j;e[15]===Symbol.for("react.memo_cache_sentinel")?(j={loop:!1,containScroll:"trimSnaps",align:"center",slidesToScroll:1},e[15]=j):j=e[15];const v=1==o?.length&&"justify-center";let C,b,I;return e[16]!==v?(C=c(v),e[16]=v,e[17]=C):C=e[17],e[18]!==x||e[19]!==o?(b=null!=x&&null!=o&&o.length>0&&o.map(Z),e[18]=x,e[19]=o,e[20]=b):b=e[20],e[21]!==C||e[22]!==b?(I=l.jsx(B,{setApi:s,opts:j,className:"mx-auto mb-5 w-full",children:l.jsx(M,{className:C,children:b})}),e[21]=C,e[22]=b,e[23]=I):I=e[23],I};function Z(e,t){return l.jsx(S,{className:c(" flex-shrink-0 flex-[0_0_calc(60%_-_10px)]  "),children:l.jsx(v,{className:"w-[180px] h-[247px]",typeId:e.typeId})},t)}e("default",(()=>{const{t:e}=s(),{showToast:d}=n(),[p,o]=a.useState(!1),[m,N]=a.useState(!1),[j,S]=a.useState(!1),[B,M]=a.useState(!1),[Z,T]=a.useState(),[O,U]=a.useState(),{currentNodeCard:A,nodes:q,setSelectedNodeCard:P}=i();a.useEffect((()=>{R(),z()}),[A]);const R=async()=>{if(null==A)return;let e=(await F(x)).timestamp;const[t,s,a]=await u(x,{...w,functionName:"nodeTypes",args:[BigInt(A.typeId)]}),[n,d,i]=await u(x,{...w,functionName:"nodeInfos",args:[BigInt(A.cardId)]}),l=Number(d)+93312e3;Number(e)>l&&(e=BigInt(l));const c=0==Number(i)?0:Number(h((Number(e)-Number(i))/2592e3,0));let r;r=c>0?c>36?a*BigInt(36):a*BigInt(c):BigInt(0),T(r)},z=async()=>{if(null==A)return;const[e]=await f(x,{contracts:[{..._,functionName:"earned",args:[BigInt(A.cardId)]}]}).then((e=>e.map((e=>"success"==e.status?e.result:void 0))));null!=e&&U(e)};return l.jsxs("div",{className:"mt-[80px] min-h-screen",children:[l.jsx(t,{isOpen:p,onClose:()=>o(!1),onUpdate:()=>{}}),l.jsx(k,{isOpen:m,onClose:()=>N(!1)}),l.jsx("div",{className:"pt-[20px] md:pt-[88px] container-1200",children:l.jsxs("div",{className:"flex md:flex-row flex-col",children:[y()?l.jsxs("div",{className:"border-[#D8D8D8] md:pr-[52px] md:border-r",children:[l.jsx("div",{className:"flex items-center gap-x-[15px] border-[#D4D4D4] border-[0.63px] bg-[#F6F6F6] px-[15px] md:px-[27px] py-[15px] rounded-[8px] w-full md:w-[505px] md:h-[141px] overflow-auto",children:null!=A&&null!=q&&q.length>0&&q.map(((e,t)=>l.jsxs("div",{onClick:()=>P(e),className:"text-center cursor-pointer",children:[l.jsx(v,{typeId:e.typeId,className:c("w-[56px] h-[77px] contrast-50",A.cardId==e.cardId&&"filter-none w-[63px] h-[87px]")}),l.jsxs("div",{className:c("mt-[5px] text-[#3D3D3D] font-bold text-[12px]",A.cardId==e.cardId&&"text-[#E5331C]"),children:["#",e.cardId]})]},t)))}),l.jsxs("div",{className:"relative mt-[55px] mb-[45px] md:h-[440px] text-center",children:[l.jsx("img",{src:C,className:"m-auto w-[283px] md:w-[466.92px] animate-flicker-soft"}),null!=A&&l.jsx(v,{typeId:A.typeId,className:"top-0 right-0 left-0 absolute w-[220px] md:w-[320px] h-[295px] md:h-[440px]"})]}),l.jsx("div",{className:"gap-y-[8px] grid grid-cols-1 m-auto w-[200px] md:w-[240px] text-[18px]",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"font-bold text-[#E5331C] text-[18px] md:text-[30px]",children:["#",null!=A&&A.cardId]}),l.jsx(r,{onClick:()=>o(!0),variant:"redBorder",className:"w-[90px] md:w-[100px] h-[40px] md:h-[50px] md:!text-[17px]",children:e("transfer")})]})})]}):l.jsxs("div",{children:[l.jsx(E,{}),l.jsxs("div",{className:"gap-y-[8px] grid grid-cols-1 m-auto w-[200px] md:w-[240px] text-[18px]",children:[l.jsx("div",{className:"flex justify-center items-center mb-[14px]",children:l.jsxs("div",{className:"font-bold text-[#E5331C] text-[18px] md:text-[30px]",children:["#",null!=A&&A.cardId]})}),l.jsxs("div",{className:"flex justify-between items-center space-x-[10px]",children:[l.jsx(r,{onClick:()=>o(!0),variant:"redBorder",className:"w-[90px] md:w-[100px] h-[40px] md:h-[50px] md:!text-[17px]",children:e("transfer")}),l.jsx(r,{onClick:()=>N(!0),variant:"redBorder",className:"w-[90px] md:w-[100px] h-[40px]",children:e("node.toggle")})]})]})]}),l.jsxs("div",{className:"mt-[40px] md:pt-[90px] pb-[100px] md:pb-0 md:pl-[71px]",children:[y()&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"font-bold text-[#E5331C] text-[40px]",children:["#",null!=A&&A.cardId]}),l.jsx("div",{className:"font-bold text-[#3D3D3D] text-[48px]",children:"MZU NFT"}),l.jsx(r,{onClick:()=>N(!0),variant:"redBorder",className:"mt-[18px] mb-[70px] w-[115px] h-[60px] !text-[20px]",children:e("node.toggle")})]}),l.jsxs("div",{children:[l.jsxs("div",{className:c("flex items-center justify-between mb-5 border-[#D4D4D4] p-[15px] md:p-[1.2vw] border rounded-[12px] md:w-[580px] md:h-[116px]"),children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:"/assets/icon1-BuwACU_D.svg",className:"mr-4 w-[30px] md:w-[52px]"}),l.jsxs("div",{className:"text-left",children:[l.jsxs("div",{className:"text-[12px] text-[rgba(61,61,61,0.7)] md:text-[17px]",children:[e("node.giftToken"),"（MZU）"]}),l.jsx("div",{className:"font-bold text-[#3D3D3D] text-[20px] md:text-[28px]",children:null!=Z&&h(g(Z))})]})]}),l.jsx(r,{disabled:null==Z||0==Number(h(g(Z))),onClick:async()=>{if(null!=A)try{S(!0);const{request:t}=await b(x,{...w,functionName:"claimReward",args:[BigInt(A.cardId)]}),s=await I(x,t);await D(x,{hash:s}),d(e("tips.claimSuccess"),"success"),R()}catch(e){}finally{S(!1)}},loading:j,variant:"red",className:"w-[100px] md:w-[180px] h-[40px] md:h-[60px] md:!text-[20px]",children:e("claim")})]}),l.jsxs("div",{className:c("flex items-center justify-between border-[#D4D4D4] p-[15px] md:p-[1.2vw] border rounded-[12px] md:w-[580px] md:h-[116px]"),children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='52'%20height='52.000003814697266'%20viewBox='0%200%2052%2052.000003814697266'%3e%3cdefs%3e%3cclipPath%20id='master_svg0_69_00247'%3e%3crect%20x='0'%20y='0'%20width='52'%20height='52.000003814697266'%20rx='0'/%3e%3c/clipPath%3e%3c/defs%3e%3cg%20clip-path='url(%23master_svg0_69_00247)'%3e%3cg%3e%3cpath%20d='M26.000002,0C11.64091,0,0,11.64091,0,26.000002C0,40.359089,11.64091,52.000004,26.000002,52.000004C40.359089,52.000004,52.000004,40.359089,52.000004,26.000002C52.000004,11.640911,40.359093,0,26.000002,0ZM26.000002,48.868183C13.354546,48.868183,3.1318181,38.645458,3.1318181,26.000002C3.1318181,13.354546,13.354546,3.1318181,26.000002,3.1318181C38.645458,3.1318181,48.868183,13.354546,48.868183,26.000002C48.868183,38.645458,38.645458,48.868183,26.000002,48.868183Z'%20fill='%23FFCC00'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M26.0000189375,3.1318359375C13.3545659375,3.1318359375,3.1318359375,13.3545659375,3.1318359375,26.0000189375C3.1318359375,38.6454769375,13.3545629375,48.8682019375,26.0000189375,48.8682019375C38.6454769375,48.8682019375,48.8682019375,38.6454769375,48.8682019375,26.0000189375C48.8682019375,13.3545659375,38.6454769375,3.1318359375,26.0000189375,3.1318359375ZM26.0000189375,47.7454799375C14.0045649375,47.7454799375,4.2545633375000005,37.9954799375,4.2545633375000005,26.0000189375C4.2545633375000005,14.0045649375,14.0045649375,4.2545633375000005,26.0000189375,4.2545633375000005C37.9954799375,4.2545633375000005,47.7454759375,14.0045649375,47.7454759375,26.0000189375C47.7454759375,37.9954799375,37.9954759375,47.7454759375,26.0000189375,47.7454799375Z'%20fill='%23FFF100'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M26.000095671875,4.254638671875C14.004638671875,4.254638671875,4.254638671875,14.004638671875,4.254638671875,26.000095671875C4.254638671875,37.995551671875,14.004638671875,47.745548671875,26.000095671875,47.745548671875C37.995551671875,47.745548671875,47.745548671875,37.995544671875,47.745548671875,26.000091671875C47.745551671875,14.004638671875,37.995551671875,4.254638671875,26.000095671875,4.254638671875ZM35.159185671875,29.663732671875C36.754638671875,38.054645671875,33.622821671875,40.241004671875,25.881910671875,36.222820671875C17.963726671875,40.536460671875,14.950090671875,38.409183671875,16.722817671875,29.959182671875C10.281912371875,24.227365671875,11.522820971875,20.741002671875,20.386457671875,19.500094671875C24.286458671875,11.700094271874999,28.068275671875,11.641003171874999,31.791002671875,19.322822671875002C40.595546671875,20.268276671875,41.718276671875,23.695550671875,35.159185671875,29.663732671875Z'%20fill='%23FFD800'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M35.15904075,29.66376275C36.754495750000004,38.05467375,33.62267875,40.24103575,25.88176675,36.22285075C17.96358445,40.53648775,14.94994735,38.40921575,16.72267535,29.95921375C10.28176565,24.22739675,11.52267395,20.741034550000002,20.38631055,19.50012495C24.28630975,11.70012455,28.06813075,11.64103365,31.79085575,19.32285265C40.59540175,20.268306250000002,41.71812975,23.695580749999998,35.15904075,29.66376275Z'%20fill='%23FFF600'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",className:"mr-4 w-[30px] md:w-[52px]"}),l.jsxs("div",{className:"text-left",children:[l.jsxs("div",{className:"text-[12px] text-[rgba(61,61,61,0.7)] md:text-[17px]",children:[e("node.pendingEarn"),"(USDT)"]}),l.jsx("div",{className:"font-bold text-[#3D3D3D] text-[20px] md:text-[28px]",children:null!=O&&h(g(O))})]})]}),l.jsx(r,{disabled:null==O||0==Number(h(g(O))),onClick:async()=>{if(null!=A)try{M(!0);const{request:t}=await b(x,{..._,functionName:"harvest",args:[BigInt(A.cardId)]}),s=await I(x,t);await D(x,{hash:s}),d(e("tips.claimSuccess"),"success"),z()}catch(e){}finally{M(!1)}},loading:B,variant:"red",className:"w-[100px] md:w-[180px] h-[40px] md:h-[60px] md:!text-[20px]",children:e("claim")})]})]})]})]})})]})}))}}}));
