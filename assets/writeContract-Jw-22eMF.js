const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BbDUEHwZ.js","assets/index-CLHvjnOI.js","assets/index-C-p4374Q.css"])))=>i.map(i=>d[i]);
import{I as e,J as t,K as a,M as n,_ as s,O as o,P as r,Q as i,S as c,T as l,E as u,U as d,W as h,Y as m,Z as f,$ as b,a0 as g,a1 as p,a2 as y,a3 as v,a4 as w,l as P,a5 as B,a6 as x,a7 as I,a8 as k,a9 as G,aa as F,ab as N,ac as T,ad as E,ae as U,af as z,ag as L,ah as q,ai as H,aj as C,ak as M,al as _,am as R,an as A,ao as S,ap as O,aq as D,ar as j,as as V,at as K,au as W,av as Y,aw as J,ax as Q,ay as Z,H as $,az as X}from"./index-CLHvjnOI.js";function ee(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function te({hash:i,signature:c}){return function(a){const n=e("0x".concat(a.substring(4))).substring(26);return t("0x".concat(n))}(await async function({hash:e,signature:t}){const i=a(e)?e:n(e),{secp256k1:c}=await s((async()=>{const{secp256k1:e}=await import("./secp256k1-BbDUEHwZ.js");return{secp256k1:e}}),__vite__mapDeps([0,1,2])),l=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:a,v:n,yParity:s}=t,r=ee(Number(null!=s?s:n));return new c.Signature(o(e),o(a)).addRecoveryBit(r)}const e=a(t)?t:n(t),s=ee(r("0x".concat(e.slice(130))));return c.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(s)})().recoverPublicKey(i.substring(2)).toHex(!1);return"0x".concat(l)}({hash:i,signature:c}))}function ae(e,t="hex"){const a=ne(e),n=i(new Uint8Array(a.length));return a.encode(n),"hex"===t?c(n.bytes):n.bytes}function ne(e){return Array.isArray(e)?function(e){const t=e.reduce(((e,t)=>e+t.length),0),a=se(t);return{length:t<=55?1+t:1+a+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+a),1===a?n.pushUint8(t):2===a?n.pushUint16(t):3===a?n.pushUint24(t):n.pushUint32(t));for(const{encode:t}of e)t(n)}}}(e.map((e=>ne(e)))):function(e){const t="string"==typeof e?l(e):e,a=se(t.length),n=1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+a+t.length;return{length:n,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+a),1===a?e.pushUint8(t.length):2===a?e.pushUint16(t.length):3===a?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}(e)}function se(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new u("Length is too large.")}function oe(t){var a;const{chainId:n,nonce:s,to:o}=t,r=null!=(a=t.contractAddress)?a:t.address,i=e(d(["0x05",ae([n?h(n):"0x",r,s?h(s):"0x"])]));return"bytes"===o?l(i):i}async function re(e){const{authorization:t,signature:a}=e;return te({hash:oe(t),signature:null!=a?a:t})}async function ie(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return r(t)}class ce extends u{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class le extends u{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ue extends u{constructor({maxPriorityFeePerGas:e}){super("`maxFeePerGas` cannot be less than the `maxPriorityFeePerGas` (".concat(y(e)," gwei)."),{name:"MaxFeePerGasTooLowError"})}}class de extends u{constructor({blockHash:e,blockNumber:t}){let a="Block";e&&(a='Block at hash "'.concat(e,'"')),t&&(a='Block at number "'.concat(t,'"')),super("".concat(a," could not be found."),{name:"BlockNotFoundError"})}}const he={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function me(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?r(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?r(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?he[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)})))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(t.v===BigInt("0")||t.v===BigInt("27"))return 0;if(t.v===BigInt("1")||t.v===BigInt("28"))return 1;if(t.v>=BigInt("35"))return t.v%BigInt("2")===BigInt("0")?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function fe(e){var t;const a=(null!=(t=e.transactions)?t:[]).map((e=>"string"==typeof e?e:me(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:a,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function be(e,{blockHash:t,blockNumber:a,blockTag:n,includeTransactions:s}={}){var o,r,i;const c=null!=n?n:"latest",l=null!=s&&s,u=void 0!==a?h(a):void 0;let d=null;if(d=t?await e.request({method:"eth_getBlockByHash",params:[t,l]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[u||c,l]},{dedupe:Boolean(u)}),!d)throw new de({blockHash:t,blockNumber:a});return((null==(i=null==(r=null==(o=e.chain)?void 0:o.formatters)?void 0:r.block)?void 0:i.format)||fe)(d)}async function ge(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function pe(e,t){var a,n,s,r,i;const{block:c,chain:l=e.chain,request:u,type:d="eip1559"}=t||{},h=await(async()=>{var t,a,n;return"function"==typeof(null==(t=null==l?void 0:l.fees)?void 0:t.baseFeeMultiplier)?l.fees.baseFeeMultiplier({block:c,client:e,request:u}):null!=(n=null==(a=null==l?void 0:l.fees)?void 0:a.baseFeeMultiplier)?n:1.2})();if(h<1)throw new ce;const m=10**(null!=(n=null==(a=h.toString().split(".")[1])?void 0:a.length)?n:0),f=e=>e*BigInt(Math.ceil(h*m))/BigInt(m),b=c||await v(e,be,"getBlock")({});if("function"==typeof(null==(s=null==l?void 0:l.fees)?void 0:s.estimateFeesPerGas)){const t=await l.fees.estimateFeesPerGas({block:c,client:e,multiply:f,request:u,type:d});if(null!==t)return t}if("eip1559"===d){if("bigint"!=typeof b.baseFeePerGas)throw new le;const t="bigint"==typeof(null==u?void 0:u.maxPriorityFeePerGas)?u.maxPriorityFeePerGas:await async function(e,t){var a,n,s;const{block:r,chain:i=e.chain,request:c}=t||{};try{const t=null!=(s=null==(a=null==i?void 0:i.fees)?void 0:a.maxPriorityFeePerGas)?s:null==(n=null==i?void 0:i.fees)?void 0:n.defaultPriorityFee;if("function"==typeof t){const a=r||await v(e,be,"getBlock")({}),n=await t({block:a,client:e,request:c});if(null===n)throw new Error;return n}if(void 0!==t)return t;const l=await e.request({method:"eth_maxPriorityFeePerGas"});return o(l)}catch(l){const[t,a]=await Promise.all([r?Promise.resolve(r):v(e,be,"getBlock")({}),v(e,ge,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new le;const n=a-t.baseFeePerGas;return n<BigInt("0")?BigInt("0"):n}}(e,{block:b,chain:l,request:u}),a=f(b.baseFeePerGas);return{maxFeePerGas:null!=(r=null==u?void 0:u.maxFeePerGas)?r:a+t,maxPriorityFeePerGas:t}}return{gasPrice:null!=(i=null==u?void 0:u.gasPrice)?i:f(await v(e,ge,"getGasPrice")({}))}}class ye extends u{constructor(e,{account:t,docsPath:a,chain:n,data:s,gas:o,gasPrice:r,maxFeePerGas:i,maxPriorityFeePerGas:c,nonce:l,to:u,value:d}){var h;const m=w({from:null==t?void 0:t.address,to:u,value:void 0!==d&&"".concat(P(d)," ").concat((null==(h=null==n?void 0:n.nativeCurrency)?void 0:h.symbol)||"ETH"),data:s,gas:o,gasPrice:void 0!==r&&"".concat(y(r)," gwei"),maxFeePerGas:void 0!==i&&"".concat(y(i)," gwei"),maxPriorityFeePerGas:void 0!==c&&"".concat(y(c)," gwei"),nonce:l});super(e.shortMessage,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",m].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}async function ve(e,t){var a,n,s;const{account:o=e.account}=t,r=o?B(o):void 0;try{let o=function(t){const{block:a,request:n,rpcStateOverride:s}=t;return e.request({method:"eth_estimateGas",params:s?[n,null!=a?a:"latest",s]:a?[n,a]:[n]})};const{accessList:i,authorizationList:c,blobs:l,blobVersionedHashes:d,blockNumber:m,blockTag:f,data:b,gas:g,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:P,value:B,stateOverride:F,...N}=await Ae(e,{...t,parameters:"local"===(null==r?void 0:r.type)?void 0:["blobVersionedHashes"]}),T=(m?h(m):void 0)||f,E=x(F),U=await(async()=>N.to?N.to:c&&c.length>0?await re({authorization:c[0]}).catch((()=>{throw new u("`to` is required. Could not infer from `authorizationList`")})):void 0)();I(t);const z=null==(s=null==(n=null==(a=e.chain)?void 0:a.formatters)?void 0:n.transactionRequest)?void 0:s.format,L=(z||k)({...G(N,{format:z}),from:null==r?void 0:r.address,accessList:i,authorizationList:c,blobs:l,blobVersionedHashes:d,data:b,gas:g,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:P,to:U,value:B});let q=BigInt(await o({block:T,request:L,rpcStateOverride:E}));if(c){const t=await async function(e,{address:t,blockNumber:a,blockTag:n="latest"}){const s=a?h(a):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||n]});return BigInt(o)}(e,{address:L.from});q+=(await Promise.all(c.map((async e=>{const{address:a}=e,n=await o({block:T,request:{authorizationList:void 0,data:b,from:null==r?void 0:r.address,to:a,value:h(t)},rpcStateOverride:E}).catch((()=>BigInt("100000")));return BigInt("2")*BigInt(n)})))).reduce(((e,t)=>e+t),BigInt("0"))}return q}catch(i){throw function(e,{docsPath:t,...a}){const n=(()=>{const t=b(e,a);return t instanceof g?e:t})();return new ye(n,{docsPath:t,...a})}(i,{...t,account:r,chain:e.chain})}}async function we(e,{address:t,blockTag:a="latest",blockNumber:n}){const s=await e.request({method:"eth_getTransactionCount",params:[t,n?h(n):a]},{dedupe:Boolean(n)});return r(s)}function Pe(e){var t;const{kzg:a}=e,n=null!=(t=e.to)?t:"string"==typeof e.blobs[0]?"hex":"bytes",s="string"==typeof e.blobs[0]?e.blobs.map((e=>l(e))):e.blobs,o=[];for(const r of s)o.push(Uint8Array.from(a.blobToKzgCommitment(r)));return"bytes"===n?o:o.map((e=>c(e)))}function Be(e){var t;const{kzg:a}=e,n=null!=(t=e.to)?t:"string"==typeof e.blobs[0]?"hex":"bytes",s="string"==typeof e.blobs[0]?e.blobs.map((e=>l(e))):e.blobs,o="string"==typeof e.commitments[0]?e.commitments.map((e=>l(e))):e.commitments,r=[];for(let i=0;i<s.length;i++){const e=s[i],t=o[i];r.push(Uint8Array.from(a.computeBlobKzgProof(e,t)))}return"bytes"===n?r:r.map((e=>c(e)))}function xe(e,t,a){return e&t^e&a^t&a}class Ie extends F{constructor(e,t,a,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=a,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=N(this.buffer)}update(e){T(this);const{view:t,buffer:a,blockLen:n}=this,s=(e=E(e)).length;for(let o=0;o<s;){const r=Math.min(n-this.pos,s-o);if(r!==n)a.set(e.subarray(o,o+r),this.pos),this.pos+=r,o+=r,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=N(e);for(;n<=s-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){T(this),U(e,this),this.finished=!0;const{buffer:t,view:a,blockLen:n,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(a,0),o=0);for(let u=o;u<n;u++)t[u]=0;!function(e,t,a,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,a,n);const s=BigInt(32),o=BigInt(4294967295),r=Number(a>>s&o),i=Number(a&o),c=n?4:0,l=n?0:4;e.setUint32(t+c,r,n),e.setUint32(t+l,i,n)}(a,n-8,BigInt(8*this.length),s),this.process(a,0);const r=N(e),i=this.outputLen;if(i%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=i/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)r.setUint32(4*u,l[u],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const a=e.slice(0,t);return this.destroy(),a}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:a,length:n,finished:s,destroyed:o,pos:r}=this;return e.length=n,e.pos=r,e.finished=s,e.destroyed=o,n%t&&e.buffer.set(a),e}}const ke=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ge=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fe=new Uint32Array(64);class Ne extends Ie{constructor(){super(64,32,8,!1),this.A=0|Ge[0],this.B=0|Ge[1],this.C=0|Ge[2],this.D=0|Ge[3],this.E=0|Ge[4],this.F=0|Ge[5],this.G=0|Ge[6],this.H=0|Ge[7]}get(){const{A:e,B:t,C:a,D:n,E:s,F:o,G:r,H:i}=this;return[e,t,a,n,s,o,r,i]}set(e,t,a,n,s,o,r,i){this.A=0|e,this.B=0|t,this.C=0|a,this.D=0|n,this.E=0|s,this.F=0|o,this.G=0|r,this.H=0|i}process(e,t){for(let d=0;d<16;d++,t+=4)Fe[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const e=Fe[d-15],t=Fe[d-2],a=L(e,7)^L(e,18)^e>>>3,n=L(t,17)^L(t,19)^t>>>10;Fe[d]=n+Fe[d-7]+a+Fe[d-16]|0}let{A:a,B:n,C:s,D:o,E:r,F:i,G:c,H:l}=this;for(let d=0;d<64;d++){const e=l+(L(r,6)^L(r,11)^L(r,25))+((u=r)&i^~u&c)+ke[d]+Fe[d]|0,t=(L(a,2)^L(a,13)^L(a,22))+xe(a,n,s)|0;l=c,c=i,i=r,r=o+e|0,o=s,s=n,n=a,a=e+t|0}var u;a=a+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,r=r+this.E|0,i=i+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(a,n,s,o,r,i,c,l)}roundClean(){Fe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Te=z((()=>new Ne));function Ee(e){var t;const{commitment:n,version:s=1}=e,o=null!=(t=e.to)?t:"string"==typeof n?"hex":"bytes",r=Te(a(i=n,{strict:!1})?q(i):i);var i;return r.set([s],0),"bytes"===o?r:c(r)}const Ue=32,ze=4096,Le=Ue*ze,qe=6*Le-1-1*ze*6;class He extends u{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:["Max: ".concat(e," bytes"),"Given: ".concat(t," bytes")],name:"BlobSizeTooLargeError"})}}class Ce extends u{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Me(e){var t,a,n;const{data:s,kzg:o,to:r}=e,u=null!=(t=e.blobs)?t:function(e){const t="string"==typeof e.data?l(e.data):e.data,a=H(t);if(!a)throw new Ce;if(a>qe)throw new He({maxSize:qe,size:a});const n=[];let s=!0,o=0;for(;s;){const e=i(new Uint8Array(Le));let a=0;for(;a<ze;){const n=t.slice(o,o+(Ue-1));if(e.pushByte(0),e.pushBytes(n),n.length<31){e.pushByte(128),s=!1;break}a++,o+=31}n.push(e)}return n.map((e=>c(e.bytes)))}({data:s}),d=null!=(a=e.commitments)?a:Pe({blobs:u,kzg:o,to:r}),h=null!=(n=e.proofs)?n:Be({blobs:u,commitments:d,kzg:o,to:r}),m=[];for(let i=0;i<u.length;i++)m.push({blob:u[i],commitment:d[i],proof:h[i]});return m}const _e=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Re=new Map;async function Ae(e,t){const{account:a=e.account,blobs:n,chain:s,gas:o,kzg:r,nonce:i,nonceManager:c,parameters:l=_e,type:u}=t,d=a?B(a):a,h={...t,...d?{from:null==d?void 0:d.address}:{}};let m,f;async function b(){return m||(m=await v(e,be,"getBlock")({blockTag:"latest"}),m)}async function g(){if(f)return f;if(s)return s.id;if(void 0!==t.chainId)return t.chainId;const a=await v(e,ie,"getChainId")({});return f=a,f}if(l.includes("nonce")&&void 0===i&&d)if(c){const t=await g();h.nonce=await c.consume({address:d.address,chainId:t,client:e})}else h.nonce=await v(e,we,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&n&&r){const e=Pe({blobs:n,kzg:r});if(l.includes("blobVersionedHashes")){const t=function(e){const{commitments:t,version:a}=e,n=e.to,s=[];for(const o of t)s.push(Ee({commitment:o,to:n,version:a}));return s}({commitments:e,to:"hex"});h.blobVersionedHashes=t}if(l.includes("sidecars")){const t=Me({blobs:n,commitments:e,proofs:Be({blobs:n,commitments:e,kzg:r}),to:"hex"});h.sidecars=t}}if(l.includes("chainId")&&(h.chainId=await g()),(l.includes("fees")||l.includes("type"))&&void 0===u)try{h.type=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new C({transaction:e})}(h)}catch(p){let t=Re.get(e.uid);if(void 0===t){const a=await b();t="bigint"==typeof(null==a?void 0:a.baseFeePerGas),Re.set(e.uid,t)}h.type=t?"eip1559":"legacy"}if(l.includes("fees"))if("legacy"!==h.type&&"eip2930"!==h.type){if(void 0===h.maxFeePerGas||void 0===h.maxPriorityFeePerGas){const a=await b(),{maxFeePerGas:n,maxPriorityFeePerGas:o}=await pe(e,{block:a,chain:s,request:h});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<o)throw new ue({maxPriorityFeePerGas:o});h.maxPriorityFeePerGas=o,h.maxFeePerGas=n}}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new le;if(void 0===t.gasPrice){const t=await b(),{gasPrice:a}=await pe(e,{block:t,chain:s,request:h,type:"legacy"});h.gasPrice=a}}return l.includes("gas")&&void 0===o&&(h.gas=await v(e,ve,"estimateGas")({...h,account:d?{address:d.address,type:"json-rpc"}:d})),I(h),delete h.parameters,h}async function Se(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const Oe=new _(128);async function De(e,t){var a,n,s,o;const{account:r=e.account,chain:i=e.chain,accessList:c,authorizationList:l,blobs:d,data:h,gas:y,gasPrice:w,maxFeePerBlobGas:P,maxFeePerGas:x,maxPriorityFeePerGas:F,nonce:N,value:T,...E}=t;if(void 0===r)throw new M({docsPath:"/docs/actions/wallet/sendTransaction"});const U=r?B(r):null;try{I(t);const r=await(async()=>t.to?t.to:null!==t.to&&l&&l.length>0?await re({authorization:l[0]}).catch((()=>{throw new u("`to` is required. Could not infer from `authorizationList`.")})):void 0)();if("json-rpc"===(null==U?void 0:U.type)||null===U){let t;null!==i&&(t=await v(e,ie,"getChainId")({}),function({chain:e,currentChainId:t}){if(!e)throw new m;if(t!==e.id)throw new f({chain:e,currentChainId:t})}({currentChainId:t,chain:i}));const o=null==(s=null==(n=null==(a=e.chain)?void 0:a.formatters)?void 0:n.transactionRequest)?void 0:s.format,u=(o||k)({...G(E,{format:o}),accessList:c,authorizationList:l,blobs:d,chainId:t,data:h,from:null==U?void 0:U.address,gas:y,gasPrice:w,maxFeePerBlobGas:P,maxFeePerGas:x,maxPriorityFeePerGas:F,nonce:N,to:r,value:T}),b=Oe.get(e.uid),g=b?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:g,params:[u]},{retryCount:0})}catch(z){if(!1===b)throw z;const t=z;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[u]},{retryCount:0}).then((t=>(Oe.set(e.uid,!0),t))).catch((a=>{const n=a;if("MethodNotFoundRpcError"===n.name||"MethodNotSupportedRpcError"===n.name)throw Oe.set(e.uid,!1),t;throw n}));throw t}}if("local"===(null==U?void 0:U.type)){const t=await v(e,Ae,"prepareTransactionRequest")({account:U,accessList:c,authorizationList:l,blobs:d,chain:i,data:h,gas:y,gasPrice:w,maxFeePerBlobGas:P,maxFeePerGas:x,maxPriorityFeePerGas:F,nonce:N,nonceManager:U.nonceManager,parameters:[..._e,"sidecars"],value:T,...E,to:r}),a=null==(o=null==i?void 0:i.serializers)?void 0:o.transaction,n=await U.signTransaction(t,{serializer:a});return await v(e,Se,"sendRawTransaction")({serializedTransaction:n})}if("smart"===(null==U?void 0:U.type))throw new R({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new R({docsPath:"/docs/actions/wallet/sendTransaction",type:null==U?void 0:U.type})}catch(L){if(L instanceof R)throw L;throw function(e,{docsPath:t,...a}){const n=(()=>{const t=b(e,a);return t instanceof g?e:t})();return new p(n,{docsPath:t,...a})}(L,{...t,account:U,chain:t.chain||void 0})}}const je=new Map,Ve=new Map;async function Ke(e,{cacheKey:t,cacheTime:a=Number.POSITIVE_INFINITY}){const n=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:a=>t.set(e,a)}),a=t(e,je),n=t(e,Ve);return{clear:()=>{a.clear(),n.clear()},promise:a,response:n}}(t),s=n.response.get();if(s&&a>0){if((new Date).getTime()-s.created.getTime()<a)return s.data}let o=n.promise.get();o||(o=e(),n.promise.set(o));try{const e=await o;return n.response.set({created:new Date,data:e}),e}finally{n.promise.clear()}}async function We(e,{cacheTime:t=e.cacheTime}={}){const a=await Ke((()=>e.request({method:"eth_blockNumber"})),{cacheKey:(n=e.uid,"blockNumber.".concat(n)),cacheTime:t});var n;return BigInt(a)}async function Ye(e,{blockHash:t,blockNumber:a,blockTag:n,hash:s,index:o}){var r,i,c;const l=n||"latest",u=void 0!==a?h(a):void 0;let d=null;if(d=s?await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,h(o)]},{dedupe:!0}):await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||l,h(o)]},{dedupe:Boolean(u)}),!d)throw new A({blockHash:t,blockNumber:a,blockTag:l,hash:s,index:o});return((null==(c=null==(i=null==(r=e.chain)?void 0:r.formatters)?void 0:i.transaction)?void 0:c.format)||me)(d)}const Je={"0x0":"reverted","0x1":"success"};function Qe(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>function(e,{args:t,eventName:a}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...a?{args:t,eventName:a}:{}}}(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?r(e.transactionIndex):null,status:e.status?Je[e.status]:null,type:e.type?he[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}async function Ze(e,{hash:t}){var a,n,s;const o=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!o)throw new S({hash:t});return((null==(s=null==(n=null==(a=e.chain)?void 0:a.formatters)?void 0:n.transactionReceipt)?void 0:s.format)||Qe)(o)}const $e=new Map,Xe=new Map;let et=0;function tt(e,t,a){const n=++et,s=()=>$e.get(e)||[],o=()=>{const t=s();if(!t.some((e=>e.id===n)))return;const a=Xe.get(e);1===t.length&&a&&a(),(()=>{const t=s();$e.set(e,t.filter((e=>e.id!==n)))})()},r=s();if($e.set(e,[...r,{id:n,fns:t}]),r&&r.length>0)return o;const i={};for(const l in t)i[l]=(...e)=>{var t,a;const n=s();if(0!==n.length)for(const s of n)null==(a=(t=s.fns)[l])||a.call(t,...e)};const c=a(i);return"function"==typeof c&&Xe.set(e,c),o}function at(e,{emitOnBegin:t=!1,emitMissed:a=!1,onBlockNumber:n,onError:s,poll:r,pollingInterval:i=e.pollingInterval}){let c;return(void 0!==r?r:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?tt(D(["watchBlockNumber",e.uid,t,a,i]),{onBlockNumber:n,onError:s},(n=>function(e,{emitOnBegin:t,initialWaitTime:a,interval:n}){let s=!0;const o=()=>s=!1;return(async()=>{var r;let i;t&&(i=await e({unpoll:o}));const c=null!=(r=await(null==a?void 0:a(i)))?r:n;await O(c);const l=async()=>{s&&(await e({unpoll:o}),await O(n),l())};l()})(),o}((async()=>{var t;try{const t=await v(e,We,"getBlockNumber")({cacheTime:0});if(c){if(t===c)return;if(t-c>1&&a)for(let e=c+BigInt("1");e<t;e++)n.onBlockNumber(e,c),c=e}(!c||t>c)&&(n.onBlockNumber(t,c),c=t)}catch(s){null==(t=n.onError)||t.call(n,s)}}),{emitOnBegin:t,interval:i}))):tt(D(["watchBlockNumber",e.uid,t,a]),{onBlockNumber:n,onError:s},(t=>{let a=!0,n=()=>a=!1;return(async()=>{try{const s=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:r}=await s.subscribe({params:["newHeads"],onData(e){var n;if(!a)return;const s=o(null==(n=e.result)?void 0:n.number);t.onBlockNumber(s,c),c=s},onError(e){var a;null==(a=t.onError)||a.call(t,e)}});n=r,a||n()}catch(r){null==s||s(r)}})(),()=>n()}))}async function nt(e,{confirmations:t=1,hash:a,onReplaced:n,pollingInterval:s=e.pollingInterval,retryCount:o=6,retryDelay:r=({count:e})=>200*(1<<e),timeout:i=18e4}){const c=D(["waitForTransactionReceipt",e.uid,a]);let l,u,d,h=!1;const{promise:m,resolve:f,reject:b}=j(),g=i?setTimeout((()=>b(new V({hash:a}))),i):void 0,p=tt(c,{onReplaced:n,resolve:f,reject:b},(n=>{const i=v(e,at,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(s){const c=e=>{clearTimeout(g),i(),e(),p()};let m=s;if(!h)try{if(d){if(t>1&&(!d.blockNumber||m-d.blockNumber+BigInt("1")<t))return;return void c((()=>n.resolve(d)))}if(l||(h=!0,await K((async()=>{l=await v(e,Ye,"getTransaction")({hash:a}),l.blockNumber&&(m=l.blockNumber)}),{delay:r,retryCount:o}),h=!1),d=await v(e,Ze,"getTransactionReceipt")({hash:a}),t>1&&(!d.blockNumber||m-d.blockNumber+BigInt("1")<t))return;c((()=>n.resolve(d)))}catch(f){if(f instanceof A||f instanceof S){if(!l)return void(h=!1);try{u=l,h=!0;const a=await K((()=>v(e,be,"getBlock")({blockNumber:m,includeTransactions:!0})),{delay:r,retryCount:o,shouldRetry:({error:e})=>e instanceof de});h=!1;const s=a.transactions.find((({from:e,nonce:t})=>e===u.from&&t===u.nonce));if(!s)return;if(d=await v(e,Ze,"getTransactionReceipt")({hash:s.hash}),t>1&&(!d.blockNumber||m-d.blockNumber+BigInt("1")<t))return;let i="replaced";s.to===u.to&&s.value===u.value&&s.input===u.input?i="repriced":s.from===s.to&&s.value===BigInt("0")&&(i="cancelled"),c((()=>{var e;null==(e=n.onReplaced)||e.call(n,{reason:i,replacedTransaction:u,transaction:s,transactionReceipt:d}),n.resolve(d)}))}catch(b){c((()=>n.reject(b)))}}else c((()=>n.reject(f)))}}})}));return m}async function st(e,t){const{abi:a,address:n,args:s,dataSuffix:o,functionName:r,...i}=t,c=i.account?B(i.account):e.account,l=W({abi:a,args:s,functionName:r});try{const{data:u}=await v(e,Y,"call")({batch:!1,data:"".concat(l).concat(o?o.replace("0x",""):""),to:n,...i,account:c}),d=J({abi:a,args:s,functionName:r,data:u||"0x"});return{result:d,request:{abi:a.filter((e=>"name"in e&&e.name===t.functionName)),address:n,args:s,dataSuffix:o,functionName:r,...i,account:c}}}catch(u){throw Q(u,{abi:a,address:n,args:s,docsPath:"/docs/contract/simulateContract",functionName:r,sender:null==c?void 0:c.address})}}async function ot(e,t){const{abi:a,account:n=e.account,address:s,args:o,dataSuffix:r,functionName:i,...c}=t;if(void 0===n)throw new M({docsPath:"/docs/contract/writeContract"});const l=n?B(n):null,u=W({abi:a,args:o,functionName:i});try{return await v(e,De,"sendTransaction")({data:"".concat(u).concat(r?r.replace("0x",""):""),to:s,account:l,...c})}catch(d){throw Q(d,{abi:a,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:i,sender:null==l?void 0:l.address})}}async function rt(e,t){const{abi:a,chainId:n,connector:s,...o}=t;let r;if(t.account)r=t.account;else{r=(await Z(e,{chainId:n,connector:s})).account}const i=e.getClient({chainId:n}),c=$(i,st,"simulateContract"),{result:l,request:u}=await c({...o,abi:a,account:r});return{chainId:i.chain.id,result:l,request:{...u,chainId:n}}}async function it(e,t){const{chainId:a,timeout:n=0,...s}=t,o=e.getClient({chainId:a}),r=$(o,nt,"waitForTransactionReceipt"),i=await r({...s,timeout:n});if("reverted"===i.status){const e=$(o,Ye,"getTransaction"),t=await e({hash:i.transactionHash}),a=$(o,Y,"call"),n=await a({...t,data:t.input,gasPrice:"eip1559"!==t.type?t.gasPrice:void 0,maxFeePerGas:"eip1559"===t.type?t.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===t.type?t.maxPriorityFeePerGas:void 0}),s=(null==n?void 0:n.data)?X("0x".concat(n.data.substring(138))):"unknown reason";throw new Error(s)}return{...i,chainId:o.chain.id}}async function ct(e,t){const{account:a,chainId:n,connector:s,...o}=t;let r;r="object"==typeof a&&"local"===(null==a?void 0:a.type)?e.getClient({chainId:n}):await Z(e,{account:null!=a?a:void 0,chainId:n,connector:s});const i=$(r,ot,"writeContract");return await i({...o,...a?{account:a}:{},chain:n?{id:n}:null})}export{it as a,Te as b,be as g,rt as s,ct as w};
