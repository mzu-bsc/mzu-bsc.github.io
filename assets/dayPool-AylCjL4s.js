import{u as t,d as e,r as a,b as n,q as s,o as i,g as u,j as p,B as o,t as l,l as c}from"./index-Dyp8DAuJ.js";import{S as y}from"./sameBox-CzG1gDgF.js";import{U as m}from"./USDTToken-8dNO4EIv.js";import{S as r}from"./StaticPool-D365cejw.js";import{s as d,w as f,a as x}from"./writeContract-CKF5oCok.js";const w={address:"0x9f6daBD400D8D09797090f1ddcB0b112033b2c33",abi:[{name:"Claim",type:"event",inputs:[{type:"uint256",name:"userCardId",indexed:!0},{type:"address",name:"user",indexed:!0},{type:"uint256",name:"amount"},{type:"uint256",name:"cycle"}]},{name:"Despoit",type:"event",inputs:[{type:"uint256",name:"userCardId",indexed:!0},{type:"uint256",name:"cycle"},{type:"uint256",name:"power"}]},{name:"Initialized",type:"event",inputs:[{type:"uint8",name:"version"}]},{name:"card",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"currentCycle",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"cycleTotalPowerOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"hasRole",type:"function",stateMutability:"view",inputs:[{type:"bytes32",name:"role"},{type:"address",name:"account"}],outputs:[{type:"bool"}]},{name:"perPowerRewardOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"staticPool",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"token",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"address"}]},{name:"userCyclesOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"},{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"userLastIndexOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"userPowerOf",type:"function",stateMutability:"view",inputs:[{type:"uint256"},{type:"uint256"}],outputs:[{type:"uint256"}]},{name:"initialize",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_permissionAdmin"},{type:"address",name:"_token"},{type:"address",name:"_card"}],outputs:[]},{name:"setStaticPool",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"_staticPool"}],outputs:[]},{name:"isInCycle",type:"function",stateMutability:"view",inputs:[{type:"uint256",name:"_userCardId"},{type:"uint256",name:"_cycle"}],outputs:[{type:"bool"}]},{name:"despoit",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"_userCardId"},{type:"uint256",name:"_power"}],outputs:[]},{name:"currentTotalPower",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{name:"distribute",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"amount"}],outputs:[]},{name:"earn",type:"function",stateMutability:"view",inputs:[{type:"uint256",name:"_userCardId"}],outputs:[{type:"uint256"}]},{name:"claim",type:"function",stateMutability:"nonpayable",inputs:[{type:"uint256",name:"_userCardId"}],outputs:[{type:"uint256"}]}]},b=()=>{const{t:b}=t(),{showToast:v}=e(),[M,h]=a.useState(!1),[j,I]=a.useState(),{currentCard:g}=n(),[C,N]=a.useState(),[S,P]=a.useState();a.useEffect((()=>{_()}),[g]);const _=async()=>{if(null==g)return;const[t,e,a]=await s(u,{contracts:[{abi:m.abi,address:i,functionName:"balanceOf",args:[w.address]},{...w,functionName:"earn",args:[BigInt(g.cardId)]},{...r,functionName:"userInfoOf",args:[BigInt(g.cardId)]}]}).then((t=>t.map((t=>"success"==t.status?t.result:void 0))));if(null!=t&&I(t),null!=e&&N(e),null!=a){const[t,e,n,s]=a;P(e)}};return p.jsx("div",{className:"relative mt-[80px] pt-[20px] md:pt-[68px] pb-[148px] text-center",children:p.jsxs("div",{className:"",children:[p.jsx("img",{src:"/assets/img-CkrEul8Z.png",className:"m-auto w-[150px] md:w-[25.7vw]"}),p.jsxs("div",{className:"m-auto !mt-[46px] w-full md:w-min",children:[p.jsxs("div",{className:"flex md:flex-row flex-col md:space-x-[42px] space-y-[15px] md:space-y-0",children:[p.jsx(y,{icon:"/assets/icon1-CbUt3AHj.svg",title:b("dayPool.text1"),value:C,className:"w-full md:w-[272px] md:h-[116px]"}),p.jsx(y,{icon:"/assets/icon2-DlJSVp-p.svg",title:b("dayPool.text2"),value:j,className:"w-full md:w-[272px] md:h-[116px]"})]}),p.jsx("div",{className:"flex justify-center items-center space-x-[20px] md:space-x-[80px] mt-[30px] md:mt-[65px]",children:p.jsx(o,{disabled:null==C||0==Number(l(c(C)))||null==S||S==BigInt("0"),loading:M,onClick:async()=>{if(null!=g)try{h(!0);const{request:t}=await d(u,{...w,functionName:"claim",args:[BigInt(g.cardId)]}),e=await f(u,t);await x(u,{hash:e}),v(b("tips.claimSuccess"),"success"),_()}catch(t){}finally{h(!1)}},variant:"red",className:"w-[120px] md:w-[180px] h-[40px] md:h-[3.1vw]",children:b("claim")})})]})]})})};export{b as default};
